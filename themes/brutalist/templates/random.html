{% extends "base.html" %}

{% block content %}
<style>
.tile-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 1rem;
}
.tile-container article {
    border: 1px solid #ccc;
    padding: 1rem;
    text-align: center;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin-bottom: 0;
}
.tile-container img {
    max-width: 100%;
    height: auto;
    margin-bottom: 0.5em;
}
@media (max-width: 768px) {
    .tile-container {
        grid-template-columns: repeat(2, 1fr);
    }
}
@media (max-width: 480px) {
    .tile-container {
        grid-template-columns: 1fr;
    }
}
</style>

<header>
    <h1>{{ section.title }}</h1>
    {% if section.description %}
        <p>{{ section.description }}</p>
    {% endif %}
    {{ section.content | safe }}
</header>

<div class="tile-container">
    {% for page in section.pages %}
    <article>
        {% if page.extra.thumbnail %}
            <a href="{% if page.extra.external_link %}{{ page.extra.external_link }}{% elif page.extra.raw_html %}{{ get_url(path=page.extra.raw_html) | safe }}{% else %}{{ page.permalink }}{% endif %}" target="_blank">
                <img src="{{ get_url(path=page.extra.thumbnail) | safe }}" alt="Thumbnail for {{ page.title }}">
            </a>
        {% else %}
            <a href="{% if page.extra.external_link %}{{ page.extra.external_link }}{% elif page.extra.raw_html %}{{ get_url(path=page.extra.raw_html) | safe }}{% else %}{{ page.permalink }}{% endif %}" target="_blank">
                <img src="https://placehold.co/600x400" alt="Placeholder image for {{ page.title }}">
            </a>
        {% endif %}
        <div>
            <h2 class="post-title">
                <a href="{% if page.extra.external_link %}{{ page.extra.external_link }}{% elif page.extra.raw_html %}{{ get_url(path=page.extra.raw_html) | safe }}{% else %}{{ page.permalink }}{% endif %}" target="_blank">{{ page.title }}</a>
            </h2>
            {% if page.date %}
            <p class="post-date" style="font-size: 0.8em; color: #666;">{{ page.date | date(format="%Y-%m-%d") }}</p>
            {% endif %}
        </div>
    </article>
    {% endfor %}
</div>
{% endblock content %}
